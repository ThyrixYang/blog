<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
  <meta charset="utf-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <link rel="icon" href="/favicon.ico">
  
  <title>Learned, then implement | bash脚本（一）</title>
  <link rel="stylesheet" href="/blog/css/style.css">
  <link rel="stylesheet" href="/blog/lib/fancybox/jquery.fancybox-1.3.4.css">
  <!--在这里倒入jquery 方便处理部分页面的jquery-->
  <script src="https://cdn.staticfile.org/jquery/1.7/jquery.min.js" type="text/javascript" ></script>
</head>

<body>
	<header class="site-header navfixed-false">
  <div class="container">
      <h1><a href="/blog/" title="Learned, then implement"><span class="octicon octicon-mark-github"></span> Learned, then implement</a></h1>
      <nav class="site-header-nav" role="navigation">
        
              
              <a href="/blog/"  class=" site-header-nav-item hvr-underline-from-center" title="Home">Home</a>
        
              
              <a href="/blog/categories/"  class=" site-header-nav-item hvr-underline-from-center" title="Categories">Categories</a>
        
              
              <a href="/blog/open-source/"  class=" site-header-nav-item hvr-underline-from-center" title="OpenSource">OpenSource</a>
        
              
              <a href="/blog/message/"  class=" site-header-nav-item hvr-underline-from-center" title="MessageBoard">MessageBoard</a>
        
      </nav>
  </div>
</header>

	
<section class="collection-head geopattern" data-pattern-id="bash脚本（一）" >
    <div class="container">
        <div class="collection-title">
            <h1 class="collection-header">
                bash脚本（一）
            </h1>
            
                <div class="collection-info">
                    <span class="meta-info">
                        <span class="octicon octicon-calendar"></span>
                        <time datetime="2016-12-25T12:10:33.000Z" itemprop="datePublished">2016-12-25</time>
                    </span>
                    
                        <span class="meta-info">
                            <span class="octicon octicon-file-directory"></span>
                            <a href='/categories/学习笔记/' title=''>学习笔记</a>
                        </span>
                    
                </div>
            
        </div>
    </div>
</section>
	<section class="container">
    <div class="columns">
        <!-- -->
        <div class="column three-fourths">
            <article class="article-content markdown-body">
                <h3 id="bash的一些基本语句"><a href="#bash的一些基本语句" class="headerlink" title="bash的一些基本语句"></a>bash的一些基本语句</h3><p>bash最前面的一行一般是</p>
<pre><code class="bash">#!/bin/bash
</code></pre>
<p>这个指示该脚本通过/bin/bash来运行。</p>
<p>export：用于设置环境变量，最常见的用法就是写在”~/.profile”里，<br>然后就可以在开机后自动写入环境变量。</p>
<pre><code class="bash">export VARNAME=&quot;value&quot;
</code></pre>
<p>exit:终止脚本并退出。</p>
<p>其返回值储存在主调函数的$?变量里。</p>
<p>读入：</p>
<pre><code class="bash">read [options] NAME1 NAME2 ... NAMEN
</code></pre>
<p>bash注释：每行前面加＃</p>
<p>执行脚本可以用bash/sh filename或者source filename或者直接用文件名。</p>
<p>如果提示权限不够，可以用chmod 755 filename来设置权限。</p>
<p>debug模式运行命令为：<br>bash -x filename</p>
<p>这个模式可以在运行的同时显示运行结果和代码。</p>
<p>在代码里可以这样写：</p>
<pre><code class="bash">code
set -x
debug code
set +x
code
</code></pre>
<p>这样只会输出中间部分的代码。</p>
<p>在bash里前面用减号就是开启一个选项，用加号就是取消。</p>
<p>env:输出全局变量.</p>
<p>变量设定：变量名＝”value”</p>
<p>取消变量：unset 变量名</p>
<p>输出变量值要用：echo \$变量名</p>
<p>调用脚本的时候传入的参数使用方法：</p>
<p>调用脚本传入三个参数</p>
<pre><code class="bash">./script.sh para1 para2 para3
</code></pre>
<pre><code class="bash">#script.sh
PARA1=$1
PARA2=$2
PARA3=$3
</code></pre>
<p>即第n个参数就用$n来引用。</p>
<p>数学计算要用两个圆括号或一个方括号：</p>
<pre><code class="bash">A=3
B=4
C=$(($A+$B))
D=$[$A+$B]
</code></pre>
<p>为一个命令起别名以及取消命名（方便啊）：</p>
<pre><code class="bash">alias name=&#39;command&#39;
unalias name
</code></pre>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>grep命令：在给定的文件中按照给出的模式搜寻字符串。</p>
<p>可以这样用</p>
<pre><code class="bash">grep ^root /etc/passwd
grep export ~/.bashrc | grep &#39;\&lt;PATH&#39;
</code></pre>
<p>由于grep是寻找匹配的行，所以使用|分割的命令可以达到先确定export所在行再在这些行里查找PATH开头的效果。</p>
<p>正则表达式的语法还是比较多的就不记了。。。</p>
<h3 id="gnu-sed-and-awk"><a href="#gnu-sed-and-awk" class="headerlink" title="gnu sed and awk"></a>gnu sed and awk</h3><p>这两个东西可以用来批处理文本。</p>
<p>配合正则表达式可以有很不错的功能。</p>
<p>暂时先知道有这么个东西。</p>
<p>听说awk是神器级的文本处理语言！</p>
<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><p>这个很重要，在任何语言里都很重要。。。</p>
<pre><code class="bash">if TEST-COMMANDS; then CONSEQUENT-COMMANDS; fi
</code></pre>
<p>bash的比较和一般语言不太一样。还是需要查reference的。</p>
<p>一定要注意空格。。。</p>
<pre><code class="bash">A=3
B=2
if [ &quot;$A&quot; -ne &quot;$B&quot; ]; then
    echo 233;
fi
</code></pre>
<p>连续的if else结构</p>
<pre><code class="bash">if TEST-COMMANDS; then
CONSEQUENT-COMMANDS;
elif MORE-TEST-COMMANDS; then
MORE-CONSEQUENT-COMMANDS;
else ALTERNATE-CONSEQUENT-COMMANDS;
fi
</code></pre>
<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><pre><code class="bash">#重定向输入
command &lt; input_file
#重定向输出
command &gt; output_file
#连续的命令通过管道重定向
first_command | second_command
#重定向标准错误
command 2&gt;error_file
#标准输出和错误写至不同的文件
command &gt;output_file 2&gt;error_file
#将标准错误发送至标准输出被重定向的任何位置
command 2&gt;&amp;1
</code></pre>
<p>1是标准输入输出，２是标准错误，其他数字还可以用来表示不同的文件。</p>
<pre><code class="bash">#将n作为输出file的id
exec fdN&gt; file
#将n作为输入file的id
exec fdN&lt; file
</code></pre>
<p>重定向还没仔细看完，以后用到再补。</p>
<h5 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h5><p>1.Machtelt Garrels, Bash Guide for Beginners</p>

            </article>
            
                <div class="share">
                    <!--开启分享-->
<div class="share-component" data-disabled="google,twitter,facebook" data-description=""></div>

<script src="/blog/js/share.min.js"></script>

                </div>    
            
            
                
<div class="comments">
    <div id="disqus_thread"></div>
    <script>
    /**
    * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');

    s.src = '//ThyrixYang.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
            
        </div>
        <div class="column one-fourth">
            
                
                


<h3>Post Directory</h3>

<div id="post-directory-module">
	<section class="post-directory">
		<p><strong class="toc-title">文章目录</strong></p>
		<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#bash的一些基本语句"><span class="toc-text">bash的一些基本语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则表达式"><span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gnu-sed-and-awk"><span class="toc-text">gnu sed and awk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if语句"><span class="toc-text">if语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重定向"><span class="toc-text">重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#reference"><span class="toc-text">reference</span></a></li></ol></li></ol></li></ol>
	</section>
</div>
            
        </div>
    </div>
</section>

<footer class="container">
    <div class="site-footer" role="contentinfo">
        <div class="copyright left mobile-block">
                © 2016
                <span title="yumemor">yumemor</span>
                <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
        </div>

        <ul class="site-footer-links right mobile-hidden">
            <li>
                <a href="javascript:window.scrollTo(0,0)" >TOP</a>
            </li>
        </ul>

        <a href="https://github.com/yumemor/hexo-theme-primer" target="_blank" aria-label="view source code">
            <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
        </a>

        <ul class="site-footer-links mobile-hidden">
            
                  
                  <li>
                    <a href="/blog/"  title="Home">Home</a>
                  </li>
            
                  
                  <li>
                    <a href="/blog/categories/"  title="Categories">Categories</a>
                  </li>
            
                  
                  <li>
                    <a href="/blog/open-source/"  title="OpenSource">OpenSource</a>
                  </li>
            
                  
                  <li>
                    <a href="/blog/message/"  title="MessageBoard">MessageBoard</a>
                  </li>
            
            <li>
                <a href="/atom.xml">
                    <span class="octicon octicon-rss" style="color:orange;"></span>
                </a>
            </li>
        </ul>
    </div>
</footer>

		<script src="/blog/js/geopattern.js"></script>
		<script src="/blog/js/highlight.pack.js"></script>
		<script src="/blog/lib/fancybox/jquery.fancybox-1.3.4.pack.js"></script>

		
			<script src="/blog/js/toc.js"></script>
		

		

		<script src="/blog/js/index.js"></script>

		 <script src="/blog/js/popular_repo.js"></script> 

	</body>
</html>